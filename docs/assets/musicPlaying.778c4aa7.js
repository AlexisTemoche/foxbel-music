import{ad as q,d,r as o,w as k,a as I,h as s,T as R}from"./index.5d554344.js";import{c as j,f as E,j as O}from"./QBtn.f22cc657.js";const Q=q("playList",{state:()=>({playList:[]}),getters:{firstMusic:i=>i.playList.length?JSON.parse(JSON.stringify(i.playList[0])):{}},actions:{newList(i){this.playList=i},clearList(){this.playList=[]}}}),$={ratio:[String,Number]};function p(i,n){return d(()=>{const l=Number(i.ratio||(n!==void 0?n.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}const F=16/9;var D=j({name:"QImg",props:{...$,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:F},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(i,{slots:n,emit:l}){const f=o(i.initialRatio),m=p(i,f);let t=null,u=!1;const a=[o(null),o(v())],r=o(0),c=o(!1),g=o(!1),w=d(()=>`q-img q-img--${i.noNativeMenu===!0?"no-":""}menu`),P=d(()=>({width:i.width,height:i.height})),C=d(()=>`q-img__image ${i.imgClass!==void 0?i.imgClass+" ":""}q-img__image--with${i.noTransition===!0?"out":""}-transition`),N=d(()=>({...i.imgStyle,objectFit:i.fit,objectPosition:i.position}));k(()=>S(),b);function S(){return i.src||i.srcset||i.sizes?{src:i.src,srcset:i.srcset,sizes:i.sizes}:null}function v(){return i.placeholderSrc!==void 0?{src:i.placeholderSrc}:null}function b(e){t!==null&&(clearTimeout(t),t=null),g.value=!1,e===null?(c.value=!1,a[r.value^1].value=v()):c.value=!0,a[r.value].value=e}function T({target:e}){u!==!0&&(t!==null&&(clearTimeout(t),t=null),f.value=e.naturalHeight===0?.5:e.naturalWidth/e.naturalHeight,_(e,1))}function _(e,h){u===!0||h===1e3||(e.complete===!0?z(e):t=setTimeout(()=>{t=null,_(e,h+1)},50))}function z(e){u!==!0&&(r.value=r.value^1,a[r.value].value=null,c.value=!1,g.value=!1,l("load",e.currentSrc||e.src))}function B(e){t!==null&&(clearTimeout(t),t=null),c.value=!1,g.value=!0,a[r.value].value=null,a[r.value^1].value=v(),l("error",e)}function x(e){const h=a[e].value,y={key:"img_"+e,class:C.value,style:N.value,crossorigin:i.crossorigin,decoding:i.decoding,referrerpolicy:i.referrerpolicy,height:i.height,width:i.width,loading:i.loading,fetchpriority:i.fetchpriority,"aria-hidden":"true",draggable:i.draggable,...h};return r.value===e?(y.class+=" q-img__image--waiting",Object.assign(y,{onLoad:T,onError:B})):y.class+=" q-img__image--loaded",s("div",{class:"q-img__container absolute-full",key:"img"+e},s("img",y))}function M(){return c.value!==!0?s("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},E(n[g.value===!0?"error":"default"])):s("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():i.noSpinner===!0?void 0:[s(O,{color:i.spinnerColor,size:i.spinnerSize})])}return b(S()),I(()=>{u=!0,t!==null&&(clearTimeout(t),t=null)}),()=>{const e=[];return m.value!==null&&e.push(s("div",{key:"filler",style:m.value})),g.value!==!0&&(a[0].value!==null&&e.push(x(0)),a[1].value!==null&&e.push(x(1))),e.push(s(R,{name:"q-transition--fade"},M)),s("div",{class:w.value,style:P.value,role:"img","aria-label":i.alt},e)}}});const L=Q(),U=q("musicPlaying",{state:()=>({id:"",index:"",music:"",img:"",img_banner:"",title:"",artist:"",playing:!1}),getters:{disabledPrev:i=>i.id?i.index==0:!0,disabledPlay:i=>i.id?!i.music.length:!0,disabledNext:i=>i.id?i.index==24:!0,getMusic:i=>({id:i.id,index:i.index,music:i.music,img:i.img,img_banner:i.img_banner,title:i.title,artist:i.artist,playing:i.playing})},actions:{prevPlay(){!this.id||this.index>0&&this.setMusic(L.playList[this.index-1])},togglePlay(){!this.id||(this.playing?document.getElementById("player").pause():document.getElementById("player").play(),this.playing=!this.playing)},nextPlay(){!this.id||this.index<24&&this.setMusic(L.playList[this.index+1])},setPlay(i){this.playing=i},setMusic({id:i,index:n,music:l,img:f,img_banner:m,title:t,artist:u}){this.id=i,this.index=n,this.music=l,this.img=f,this.img_banner=m,this.title=t,this.artist=u,this.playing=!0},reset(){this.id="",this.index="",this.music="",this.img="",this.img_banner="",this.title="",this.artist="",this.playing=!1}}});export{D as Q,U as a,Q as u};
